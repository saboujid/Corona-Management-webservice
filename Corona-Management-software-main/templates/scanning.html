{% extends "layout.html" %} {% block body %}
<html>
  <head>
    <style>
      .result{
        background-color: rgba(98, 71, 12, 0.715);
        color:#fff;
        padding:20px;
      }
    </style>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/row_col.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}"/>

    <title>Scan</title>
  </head>

<body>
  <br> <br>
  <script src="https://reeteshghimire.com.np/wp-content/uploads/2021/05/html5-qrcode.min_.js"></script>

  <div class="row">
    <div class="col content__main">
      <div class="row">
        <div class="col">
          <div style="width:500px;" id="reader"></div>
        </div>
        <div class="col">
          <br>
          <h4 class="para">Press the button</h4>
          <div class="para" id="result">The scan result will appear here</div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    function onScanSuccess(qrCodeMessage) {
      document.getElementById('result').innerHTML = '<form action="/dashboard_visitor/timer" method="POST"><input type="submit" class="result" name="final_result" value="'+qrCodeMessage+'"></input></form>';
    }
    function onScanError(errorMessage) {
      //handle scan error
    }
    var html5QrcodeScanner = new Html5QrcodeScanner(
        "reader", { fps: 10, qrbox: 250 });
    html5QrcodeScanner.render(onScanSuccess, onScanError);
  </script>
</body>
</html>

{{ super() }} {% endblock %}